/**
 * @license RequireJS i18n 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */

define("sound",[],function(){var e=function(e){this.init(e)};return e.prototype={init:function(e){this.sound=document.createElement("audio"),this.sound.setAttribute("src",e),this.sound.setAttribute("preload",!0),this.sound.setAttribute("id","yanSound")},src:function(e){return void 0!==e&&(this.sound.src=e),this.sound.src},play:function(e){this.src(e),this.sound.play()}},e}),define("screen",["zepto","sound"],function(e,t){"use strict";var o=new t("media/click.wav"),n=function(){this.init()};return e.extend(n.prototype,{init:function(){var t=e("#screen"),o=parseInt(t.css("width"),10);this.$screen=t,this.width=o,t.height(o),this.bindEvent()},resetScreen:function(){for(var e=this.screen,t=e.length;t--;)e[t]=0},reset:function(){this.$screen.empty(),this.$squares=e(),this.screen=[]},create:function(t){var o,n=this.$screen,s=(this.width-6*t)/t,i=e('<div class="row"></div>'),r=e('<div class="square js-square"></div>'),a=[];if(this.n&&this.n===t)return this.$squares.removeClass("square-active"),this.resetScreen(),0;for(this.reset(),this.n=t,r.width(s).height(s),o=0;o<t;o++)i.append(r.clone()),a[o]=0;for(o=0;o<t;o++)n.append(i.clone(!0,!0)),this.screen=this.screen.concat(a);this.$squares=n.find(".js-square")},bindEvent:function(){function t(e){var t=0,o=e.length;for(t=0;t<o;t++)if(0===e[t])return!1;return!0}function n(e,t){var o=Math.floor(e/t),n=e%t,s=[];return s.push(e),o+1<t&&s.push((o+1)*t+n),o-1>-1&&s.push((o-1)*t+n),n-1>-1&&s.push(o*t+n-1),n+1<t&&s.push(o*t+n+1),s}function s(t,o){o.each(function(o){0===t[o]?e(this).removeClass("square-active"):e(this).addClass("square-active")})}function i(o,i,r){n(i.index(o),r).forEach(function(e){a.screen[e]=Number(!a.screen[e])}),s(a.screen,i),e(document).trigger("screen/click"),t(a.screen)&&e(document).trigger("screen/success")}var r=this.$screen,a=this,c=document.hasOwnProperty("ontouchstart")?"tap":"click";r.on(c,".js-square",function(t){var n=e(this);o.play(),i(n,a.$squares,a.n),t.preventDefault()})}}),n}),define("storage",[],function(){var e=function(){this.init()};return e.prototype={init:function(){this.storage=function(){var e=!1;return"object"==typeof window.localStorage?e=localStorage:"object"==typeof window.globalStorage&&(e=window.globalStorage),e}()},getStorage:function(){return this.storage},save:function(e,t){var o=this.storage,n=!1;return!1!==o&&(n=o.setItem(e,t)),n},load:function(e){var t=this.storage,o="";return!1!==t&&(o=t.getItem(e)),o}},e}),define("score",["zepto","storage"],function(e,t){var o=function(){this.init()};return e.extend(o.prototype,{init:function(){var o=new t,n=parseInt(o.load("curLevel"),10)||1,s=parseInt(o.load("supLevel"),10)||1,i=parseInt(o.load("supClick"),10)||0,r=parseInt(o.load("curClick"),10)||0,a=parseInt(o.load("totalClick"),10)||0,c=e("#cur-level"),l=e("#sup-level"),u=e("#sup-level-click"),h=e("#cur-click"),p=e("#total-click");this.storage=o,this.$curLevel=c,this.$supLevel=l,this.$supClick=u,this.$curClick=h,this.$totalClick=p,this.curLevel=n,this.supLevel=s,this.supClick=i,this.curClick=r,this.totalClick=a,this.updateView()},getLevel:function(){return this.curLevel},addClick:function(){this.curClick+=1,this.totalClick+=1,this.updateView()},addLevel:function(){return this.curLevel+=1,(this.curLevel>this.supLevel||this.curLevel===this.supLevel&&this.supClick>this.totalClick)&&(this.supLevel=this.curLevel,this.supClick=this.totalClick,e(document).trigger("score/hightLevel",[this.supLevel,this.supClick])),this.save(),this.updateView(),this.curLevel},resetLevel:function(){var e=this.storage;return this.curLevel=parseInt(e.load("curLevel"),10)||1,this.curClick=parseInt(e.load("curClick"),10)||0,this.totalClick=parseInt(e.load("totalClick"),10)||0,this.updateView(),this.curLevel},reset:function(){this.curLevel=1,this.curClick=0,this.totalClick=0,this.updateView()},save:function(){var e=this.storage;e.save("curLevel",this.curLevel),e.save("supLevel",this.supLevel),e.save("supClick",this.supClick),e.save("curClick",this.curClick),e.save("totalClick",this.totalClick)},updateView:function(){this.$curLevel.html(this.curLevel),this.$supLevel.html(this.supLevel),this.$supClick.html(this.supClick),this.$curClick.html(this.curClick),this.$totalClick.html(this.totalClick)}}),o}),function(){"use strict";function e(e,t,o,n,s,i){t[e]&&(o.push(e),!0!==t[e]&&1!==t[e]||n.push(s+e+"/"+i))}function t(e,t,o,n,s){var i=n+t+"/"+s;require._fileExists(e.toUrl(i+".js"))&&o.push(i)}function o(e,t,n){var s;for(s in t)!t.hasOwnProperty(s)||e.hasOwnProperty(s)&&!n?"object"==typeof t[s]&&(!e[s]&&t[s]&&(e[s]={}),o(e[s],t[s],n)):e[s]=t[s]}var n=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(s){var i=s.config?s.config():{};return{version:"2.0.4",load:function(s,r,a,c){c=c||{},c.locale&&(i.locale=c.locale);var l,u,h,p=n.exec(s),d=p[1],v=p[4],f=p[5],m=v.split("-"),g=[],w={},k="";if(p[5]?(d=p[1],l=d+f):(l=s,f=p[4],v=i.locale,v||(v=i.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),m=v.split("-")),c.isBuild){for(g.push(l),t(r,"root",g,d,f),u=0;u<m.length;u++)h=m[u],k+=(k?"-":"")+h,t(r,k,g,d,f);r(g,function(){a()})}else r([l],function(t){var n,s=[];for(e("root",t,s,g,d,f),u=0;u<m.length;u++)n=m[u],k+=(k?"-":"")+n,e(k,t,s,g,d,f);r(g,function(){var e,n,i;for(e=s.length-1;e>-1&&s[e];e--)i=s[e],n=t[i],!0!==n&&1!==n||(n=r(d+i+"/"+f)),o(w,n);a(w)})})}}})}(),define("nls/data",{root:{title:"Inverter",comment:"disqus",header:{h1:"Inverter",share:"share"},score:{currentLevel:"Current Level:",bestLevel:"Best Level:",bestLevel1:"(",bestLevel2:"clicks)",currentClick:"Current Clicks:",totalClick:"Total Clicks:"},menu:{restartLevel:"Restart Level",restartGame:"New Game",intro:"Instructions"},download:{h2:"Scan code is downloaded to the mobile phone for offline play:",title:"download"},restartGamePop:{h2:"Are you sure?",body:"Do you really want to start over",ok:"New Game"},restartLevelPop:{h2:"Are you sure?",body:"Do you really want to start over",ok:"Restart Level"},successPop:{h2:"Congratulations to pass",body:'On to level <span id="success-pop-level">2</span>',ok:"Go"},hightLevelPop:{h2:"New record",body:"Congratulations, you have set a new record",ok:"Go",share:"Share"},sharePop:{h2:"Share",weibo:"Weibo",qzone:"Qzone",weixin:"Wechat",ok:"Close"},introPop:{h2:"Instructions",li1:"How to win: Make the board blue. ",li2:"How to play: Click a square to flip its color and the color of all tiles that share an edge with it.",ok:"Lets go!"}},"zh-cn":!0}),require.config({shim:{zepto:{exports:"Zepto"},baiduTemplate:{exports:"baidu.template"}}}),require(["zepto","screen","score","i18n!nls/data","baiduTemplate"],function(e,t,o,n,s){function i(t,o){var n=encodeURIComponent("http://yanhaijing.com/inverter"),s=encodeURIComponent("变色方块 史上最难智力游戏，我逆天用了"+o+"次点击，通过了第"+(t-1)+"关，你，你，你快快来挑战我吧@颜海镜 "),i=encodeURIComponent("http://yanhaijing.com/inverter/media/5.png"),r=encodeURIComponent("变色方块 史上最难智力游戏，我逆天用了"+o+"次点击，通过了第"+(t-1)+"关，你，你，你快快来挑战我吧"),a=encodeURIComponent("变色方块 史上最难智力游戏"),c=encodeURIComponent("变色方块 史上最难智力游戏"),l="http://service.weibo.com/share/share.php?url="+n+"&title="+s+"&pic="+i,u="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+n+"&desc="+r+"&title="+c+"&summary="+a+"&pic="+i,h="http://yanhaijing.com/inverter 变色方块 史上最难智力游戏，我逆天用了"+o+"次点击，通过了第"+(t-1)+"关，你，你，你快快来挑战我吧@颜海镜 ",p="变色方块 史上最难智力游戏，我逆天用了"+o+"次点击，通过了第"+(t-1)+"关，你，你，你快快来挑战我吧";e("#share-weibo").attr("href",l),e("#share-qq").attr("href",u),e(".ds-thread textarea").val(h),document.title=p}!function(){var t;document.title=n.title,t=s("t:header",{data:n.header}),e("#header").html(t),t=s("t:score",{data:n.score}),e("#score").html(t),t=s("t:menu",{data:n.menu}),e("#menu").html(t),t=s("t:download",{data:n.download}),e("#download").html(t),t=s("t:restart-game-pop",{data:n.restartGamePop}),e("#restart-game-pop").html(t),t=s("t:restart-level-pop",{data:n.restartLevelPop}),e("#restart-level-pop").html(t),t=s("t:success-pop",{data:n.successPop}),e("#success-pop").html(t),t=s("t:hightLevel-pop",{data:n.hightLevelPop}),e("#hightLevel-pop").html(t),t=s("t:share-pop",{data:n.sharePop}),e("#share-pop").html(t),t=s("t:intro-pop",{data:n.introPop}),e("#intro-pop").html(t),t=s("t:comment",{data:n.comment}),e("#comment").html(t),e("body").append(document.getElementById("t:"+n.comment).innerHTML)}();var r=new t,a=new o,c=e(".js-pop"),l=document.hasOwnProperty("ontouchstart")?"tap":"click";e(function(){var e=a.getLevel();r.create(e)}),e(document).on("screen/success",function(){var t;e("#success-pop").show(),t=a.addLevel(),e("#success-pop-level").html(t),r.create(t),window.setTimeout(function(){e("#success-pop").hide()},2e3)}).on("screen/click",function(){a.addClick()}).on("score/hightLevel",function(t,o,n){e("#success-pop").hide(),e("#hightLevel-pop").show(),i(o,n)}),c.on(l,function(t){e(this).hide(),t.preventDefault()}),e("#restart-game").on(l,function(e){a.reset(),r.create(1),e.preventDefault()}),e("#pop-restart-game").on(l,function(t){e("#restart-game-pop").show(),t.preventDefault()}),e("#restart-level").on(l,function(e){r.create(a.resetLevel()),e.preventDefault()}),e("#pop-restart-level").on(l,function(t){e("#restart-level-pop").show(),t.preventDefault()}),e("#pop-intro").on(l,function(t){e("#intro-pop").show(),t.preventDefault()}),e(".js-share-btn").on(l,function(e){e.stopPropagation()}),e("#share").on(l,function(t){e("#share-pop").show(),t.preventDefault()}),e("#hight-share").on(l,function(t){e("#share-pop").show(),t.preventDefault(),t.stopPropagation()}),e("#share-weixin").on(l,function(t){e("#share-pop").hide(),e("#hightLevel-pop").hide(),e("#weixin-shade").show(),t.preventDefault(),t.stopPropagation()}),e("#weixin-shade").on(l,function(t){e("#weixin-shade").hide(),t.preventDefault()})}),define("index",function(){});